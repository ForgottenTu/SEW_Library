@page "/AddAuthor"
@using Domain.Interfaces
@using Library_DB
@inject IRepository<Author> AuthorRepo
@rendermode InteractiveServer

<h3>Add Author</h3>

<div class="container">
    <div class="row">
        <EditForm Model="@NewAuthor" OnValidSubmit="Create" FormName="AddAuthorForm">
            <DataAnnotationsValidator />
            <ValidationSummary />

            <div class="col-5">
                <label class="small text-info" for="FirstName">First Name</label>
                <InputText id="FirstName" class="form-control" @bind-Value="NewAuthor.FirstName" />
            </div>

            <div class="col-5">
                <label class="small text-info" for="LastName">Last Name</label>
                <InputText id="LastName" class="form-control" @bind-Value="NewAuthor.LastName" />
            </div>

            <div class="col-5">
                <label class="small text-info" for="DateOfBirth">Date of Birth</label>
                <InputDate id="DateOfBirth" class="form-control" @bind-Value="NewAuthor.DateOfBirth" />
            </div>

            <div class="col-5">
                <label class="small text-info" for="Biography">Biography</label>
                <InputTextArea id="Biography" class="form-control" @bind-Value="NewAuthor.Biography" />
            </div>

            <button class="btn btn-info btn-sm mt-3" type="submit">Create</button>
        </EditForm>
    </div>
</div>

@code {
    private Author NewAuthor { get; set; } = new Author();

    private void Create()
    {
        AuthorRepo.Create(NewAuthor);
        NewAuthor = new Author();
    }
}